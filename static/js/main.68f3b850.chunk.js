(this.webpackJsonpdemochatapp=this.webpackJsonpdemochatapp||[]).push([[0],{14:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(5),a=n.n(r),s=n(15),i=n.n(s),o=(n(14),n(12)),u=n.n(o),d=n(16),p=n(13),j=n(9),h=(n(29),n(26),n(17)),l=n(18);j.a.initializeApp({apiKey:"AIzaSyDeaWp4h3cR_JoDGEO9JsF4PI0pR6XIHRE",authDomain:"chat-app-32910.firebaseapp.com",projectId:"chat-app-32910",storageBucket:"chat-app-32910.appspot.com",messagingSenderId:"282859378167",appId:"1:282859378167:web:3db1378e0d4d8a60844af2",measurementId:"G-HTNBX6X4BY"});var b=j.a.auth(),m=j.a.firestore();function O(){return Object(c.jsx)("button",{onClick:function(){var e=new j.a.auth.GoogleAuthProvider;b.signInWithPopup(e).catch((function(e){return console.log("Error Occured",e)}))},children:" Sign In with Google "})}function g(){return Object(c.jsx)("button",{onClick:function(){return j.a.auth().signOut()},children:"Sign Out"})}function f(){var e=Object(r.useRef)(),t=m.collection("messages"),n=t.orderBy("createdAt"),a=Object(l.a)(n,{idField:"id"}),s=Object(p.a)(a,1)[0];console.log(s);var i=function(){var n=Object(d.a)(u.a.mark((function n(c){var r,a,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),r=b.currentUser,a=r.uid,s=r.photoURL,n.next=4,t.add({chat:document.getElementById("chatMessage").value,uid:a,photoURL:s,createdAt:j.a.firestore.FieldValue.serverTimestamp()});case 4:document.getElementById("chatMessage").value="",e.current.scrollIntoView({behaviour:"smooth"});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("main",{children:[s&&s.map((function(e){return Object(c.jsx)(v,{message:e})})),Object(c.jsx)("div",{ref:e})]}),Object(c.jsxs)("form",{onSubmit:i,children:[Object(c.jsx)("input",{required:!0,id:"chatMessage",type:"text"}),Object(c.jsx)("button",{type:"submit",children:"Send"})]})]})}function v(e){var t=e.message,n=t.chat,r=t.uid,a=t.photoURL;console.log(e.message);var s=r===b.currentUser.uid?"sent":"recieved";return Object(c.jsxs)("div",{className:"message ".concat(s),children:[Object(c.jsx)("img",{alt:"NA",src:a}),Object(c.jsx)("p",{children:n}),";"]})}var x=function(){var e=Object(h.a)(b),t=Object(p.a)(e,1)[0];return Object(c.jsx)("div",{className:"App",children:t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(g,{}),Object(c.jsx)(f,{})," "]}):Object(c.jsx)(O,{})})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.68f3b850.chunk.js.map